{% extends 'birds/base.html' %}

{% block content %}
<div class="page-content">
	<section class="mdl-grid">
		<div class="mdl-cell mdl-cell--12-col">
		{% if latest_sighting_list %}
			<div class="mdl-grid">
			{% for sighting in latest_sighting_list %}
				<div class="hover-card mdl-cell mdl-cell--6-col-desktop mdl-cell--8-col-tablet demo-card-wide mdl-card mdl-shadow--2dp">
					<a class="no-decoration" href="{% url 'birds:view_sighting' sighting.id %}">
						{% if sighting.images.count == 0 %}
							<div style="height:100px;" class="image image-block-m mdl-color--blue-grey-800">
								<h4 style="top:0px;" >
									<span>{{ sighting.caption }}</span>
								</h4>
								<div class="mdl-card__actions index-species-tag">
									<span>
										<i class="material-icons">local_offer</i><span> {{sighting.species_tag}}</span>
									</span>
								</div>
							</div>
						{% else %}
							{% for image in sighting.images %}
								{% if forloop.counter == 1 %}
									<div class="image image-block-m" style="background: url({{ image.photo.url }}) no-repeat center;background-size:cover;">
										<h4>
											<span>{{ sighting.caption }}</span>
										</h4>
										<div class="mdl-card__actions index-species-tag">
											<span>
												<i class="material-icons">local_offer</i><span> {{sighting.species_tag}}</span>
											</span>
										</div>
									</div>
								{% endif %}
							{% endfor %}
						{% endif %}
					</a>
					{% if sighting.images.count == 0 %}
						<div class="mdl-card__supporting-text">
							
							<div style="float:left">{{ sighting.time_diff }}</div>

							<div style="float:right">
							{% if sighting.num_likes  == 0 %}
								<i class="material-icons">thumb_up</i>
								{% else %}
								<i class="material-icons mdl-badge mdl-badge--overlap" data-badge="{{ sighting.num_likes }}">thumb_up</i>
							{% endif %}
							{% if sighting.num_comments  == 0 %}
								<i class="material-icons">comment</i>
								{% else %}
								<i class="material-icons mdl-badge mdl-badge--overlap" data-badge="{{ sighting.num_comments }}">comment</i>
							{% endif %}
							</div>	
						</div>	
					{% else %}
					<div style="padding-top: 13px; padding-bottom: 13px;" class="mdl-card__supporting-text">
						
						<div style="float:left">{{ sighting.time_diff }}</div>

						<div style="float:right">
							<i class="material-icons mdl-badge mdl-badge--overlap" data-badge="{{ sighting.images.count }}">photo_album</i>
							{% if sighting.num_likes  == 0 %}
								<i class="material-icons">thumb_up</i>
								{% else %}
								<i class="material-icons mdl-badge mdl-badge--overlap" data-badge="{{ sighting.num_likes }}">thumb_up</i>
							{% endif %}
							{% if sighting.num_comments  == 0 %}
								<i class="material-icons">comment</i>
								{% else %}
								<i class="material-icons mdl-badge mdl-badge--overlap" data-badge="{{ sighting.num_comments }}">comment</i>
							{% endif %}
						</div>
					</div>	
					{% endif %}
					<!--<div class="mdl-card__menu">
						<button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect index-card-buttons">
						  <i class="material-icons md-light">star_border</i>
						</button>
						<button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect index-card-buttons">
						  <i class="material-icons md-light">flag</i>			      
						</button>
						<button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect index-card-buttons">
						  <i class="material-icons">insert_comment</i>
						</button>
					</div>-->
				</div>
			{% endfor %}
			</div>
		{% else %}
			<div class="mdl-components__warning">
				<b>Note:</b> No sightings are available.
			</div>
		{% endif %}
		</div>
	</section>
</div>
{% endblock %}
